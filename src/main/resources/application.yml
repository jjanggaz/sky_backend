server:
  port: 8080
  servlet:
    encoding:
      charset: UTF-8
      force: true
      enabled: true
    session:
      timeout: -1 # HttpSession 무제한 (만료되지 않음)
      cookie:
        max-age: -1 # 세션 쿠키도 무제한

spring:
  application:
    name: wai-admin-backend

  # 세션 설정
  session:
    timeout: -1 # 세션 타임아웃 무제한
    cookie:
      http-only: true
      secure: false # 개발환경에서는 false, 운영환경에서는 true (prod 프로파일에서 오버라이드)
      same-site: lax

  # 한글 인코딩 설정
  http:
    encoding:
      charset: UTF-8
      force: true
      enabled: true

  # 파일 업로드 설정
  servlet:
    multipart:
      max-file-size: 1024MB # 개별 파일 최대 크기
      max-request-size: 1024MB # 전체 요청 최대 크기 (여러 파일 포함)
      file-size-threshold: 1MB # 메모리에서 디스크로 전환하는 임계값
      location: ${java.io.tmpdir} # 임시 파일 저장 위치

  # 외부 properties 파일 로드 (기본값: api.properties, 프로파일별로 오버라이드됨)
  # 프로파일별 설정:
  # - local: application-local.yml -> api-local.properties
  # - prod: application-prod.yml -> api-prod.properties
  config:
    import: classpath:api.properties

  # 데이터베이스 설정
  datasource:
    url: jdbc:mysql://localhost:3306/sky?useSSL=false&serverTimezone=Asia/Seoul&characterEncoding=UTF-8
    username: sky
    password: sky
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      connection-timeout: 30000
      maximum-pool-size: 10
      minimum-idle: 5
      idle-timeout: 600000
      max-lifetime: 1800000
      connection-test-query: SELECT 1
      # 시작 시 연결 확인 (연결 실패 시 애플리케이션 시작 중단)
      initialization-fail-timeout: 1

  # MyBatis 설정
  mybatis:
    mapper-locations: classpath*:mapper/**/*.xml
    type-aliases-package: com.wai.admin.vo
    configuration:
      map-underscore-to-camel-case: true
      default-fetch-size: 100
      default-statement-timeout: 30

  # 로깅 설정
  logging:
    level:
      com.wai.admin: DEBUG
      org.springframework.web: DEBUG
      org.springframework.security: DEBUG
      org.mybatis: DEBUG
      com.wai.admin.mapper: DEBUG
    pattern:
      console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
      file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
    file:
      name: logs/application.log
      charset: UTF-8
    charset:
      console: UTF-8
      file: UTF-8

# DevTools 설정 (개발 편의성)
devtools:
  restart:
    enabled: true
    additional-paths: src/main/java
    exclude: static/**,public/**,templates/**,mapper/**

# API 설정 (api.properties에서 가져온 값 사용)
api:
  base-url: ${api.base-url}
  version: ${api.version}

# Swagger 설정
springdoc:
  api-docs:
    path: /v3/api-docs
  swagger-ui:
    path: /swagger-ui.html
    tags-sorter: alpha
    operations-sorter: alpha
    doc-expansion: none
    # Example Value 자동 생성 설정
    default-models-expand-depth: 1
    default-model-expand-depth: 1
  packages-to-scan: com.wai.admin.controller
